(this["webpackJsonpmy-memo"]=this["webpackJsonpmy-memo"]||[]).push([[6],{58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),m=a(20),l=a(19),c=a(27),o=a(38),u=a(35),i=function(e){var t=Object.assign({},e);return r.a.createElement(m.b,Object.assign({to:"/my-memo/login",className:"flex items-end justify-end text-white rounded hover:text-teal-200"},t),r.a.createElement(l.b,{icon:"userCircle",size:l.a.MEDIUM},r.a.createElement("span",{className:"sr-only sm:not-sr-only sm:ml-2 sm:flex"},"Connexion")))},p=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=t[0],p=t[1];return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(u.a,{onClose:function(){return p(!1)}}),r.a.createElement(o.a,null,r.a.createElement(l.b,{icon:"menu",size:l.a.MEDIUM,onClick:function(){return p(!0)},className:"m-4 sm:hidden","aria-label":"Menu"}),r.a.createElement(c.a,{onClick:function(){return p(!1)}}),r.a.createElement(o.b,null,r.a.createElement("ul",{className:"hidden sm:flex sm:flex-row sm:mr-auto sm:ml-4 sm:w-auto"},r.a.createElement("li",{className:"py-2"},r.a.createElement(m.b,{to:"/my-memo/notes",onClick:function(){return p(!1)},className:"ml-2 mr-4 text-teal-200 hover:text-white"},"Notes"))),r.a.createElement(i,{onClick:function(){return p(!1)}}))))},d=a(39),f=a(18),b=a(1),x=a.n(b),E=a(2),h=a(40),y=a(32),v=a(26),g=Object(n.forwardRef)((function(e,t){var a=e.label,n=e.type,s=e.id,m=e.name,l=e.maxLength,c=Object(y.a)(e,["label","type","id","name","maxLength"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:s,className:"pt-4 font-bold"},a),r.a.createElement(v.a,Object.assign({id:s,type:n,placeholder:a,name:m,ref:t,maxLength:l},c)))})),w=a(3),N=function(){var e,t,a=Object(n.useState)(!1),l=Object(s.a)(a,2),c=l[0],o=l[1],u=r.a.useState(""),i=Object(s.a)(u,2),p=i[0],d=i[1],b=Object(w.b)().signup,y=Object(n.useRef)(null),v=Object(h.a)({mode:"onBlur"}),N=v.register,j=v.handleSubmit,O=v.errors,L=v.watch;Object(n.useEffect)((function(){var e;null===(e=y.current)||void 0===e||e.focus()}),[]);var C=function(){var e=Object(E.a)(x.a.mark((function e(t){var a,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.email,r=t.password,e.prev=1,e.next=4,b({username:a,email:n,password:r});case 4:e.sent?o(!0):d("Une erreur est survenue"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d("Une erreur est survenue : ".concat(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("section",{className:"flex flex-col flex-1 w-full max-w-2xl p-2 mx-auto my-auto sm:shadow-lg sm:border-t-4 sm:border-blue-900"},c?r.a.createElement(f.a,{to:"/my-memo/login"}):null,r.a.createElement("header",{className:"flex items-center justify-center py-2 pl-8 pr-12 text-gray-900"},r.a.createElement("h1",{className:"text-5xl font-medium text-gray-800 font-hand"},"Inscription")),r.a.createElement("form",{onSubmit:j(C),className:"flex flex-col px-8"},r.a.createElement(g,{id:"signup-username",label:"Nom d'utilisateur",type:"text",name:"username",ref:function(e){y.current=e,N(e)},maxLength:20}),r.a.createElement(g,{id:"signup-email",label:"Email",type:"email",name:"email",ref:N({required:!0})}),O.email&&r.a.createElement("span",{className:"text-red-500"},"L'email est requis"),r.a.createElement(g,{id:"signup-password",label:"Mot de passe",type:"password",name:"password",ref:N({required:!0,minLength:8})}),"required"===(null===(e=O.password)||void 0===e?void 0:e.type)&&r.a.createElement("span",{className:"text-red-500"},"Le mot de passe est requis"),"minLength"===(null===(t=O.password)||void 0===t?void 0:t.type)&&r.a.createElement("span",{className:"text-red-500"},"Le mot de passe doit contenir au moins 8 caract\xe8res avec au moins une majuscule, une minuscule, un chiffre et un caract\xe8re sp\xe9cial"),r.a.createElement(g,{id:"signup-password-confirm",name:"confirmPassword",label:"Confirmez le mot de passe",type:"password",ref:N({validate:function(e){return e===L("password")},required:!0})}),O.confirmPassword&&r.a.createElement("span",{className:"text-red-500"},"Les mots de passe ne correspondent pas"),r.a.createElement("button",{type:"submit",className:"inline-flex items-center px-4 py-2 mx-auto my-4 text-white bg-blue-900 rounded hover:bg-blue-800"},"S'inscrire")),r.a.createElement("span",{className:"mx-auto"},"Vous avez d\xe9j\xe0 un compte ?"," ",r.a.createElement(m.b,{to:"/my-memo/signup",className:"text-blue-700 hover:underline"},"Connectez-vous")),p&&r.a.createElement("span",{className:"mx-auto text-red-500"},p))},j=function(){var e,t,a=r.a.useState(""),l=Object(s.a)(a,2),c=l[0],o=l[1],u=Object(w.b)().login,i=Object(n.useRef)(null),p=Object(h.a)({mode:"onBlur"}),d=p.register,f=p.handleSubmit,b=p.errors,y=function(){var e=Object(E.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.email,n=t.password,e.prev=1,e.next=4,u({email:a,password:n});case 4:e.sent||o("Erreur de connexion"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),o("Une erreur est survenue : ".concat(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e;null===(e=i.current)||void 0===e||e.focus()}),[]),r.a.createElement("section",{className:"flex flex-col flex-1 max-w-2xl p-2 mx-auto my-auto sm:border-t-4 sm:border-blue-900 sm:shadow-lg"},r.a.createElement("header",{className:"flex items-center justify-center py-2 pl-8 pr-12 text-gray-900"},r.a.createElement("h1",{className:"text-5xl font-medium text-gray-800 font-hand"},"Connexion")),r.a.createElement("form",{onSubmit:f(y),className:"flex flex-col px-8"},r.a.createElement(g,{id:"signup-email",label:"Email",type:"email",name:"email",ref:function(e){i.current=e,d(e,{required:!0})}}),b.email&&r.a.createElement("span",{className:"text-red-500"},"L'email est requis"),r.a.createElement(g,{id:"signup-password",label:"Mot de passe",type:"password",name:"password",ref:d({required:!0,minLength:6})}),"required"===(null===(e=b.password)||void 0===e?void 0:e.type)&&r.a.createElement("span",{className:"text-red-500"},"Le mot de passe est requis"),"minLength"===(null===(t=b.password)||void 0===t?void 0:t.type)&&r.a.createElement("span",{className:"text-red-500"},"Le mot de passe doit contenir au moins 6 caract\xe8res avec une lettre et un chiffre"),r.a.createElement(m.b,{to:"/my-memo/signup",className:"mr-auto text-blue-700 hover:underline"},"Mot de passe oubli\xe9 ?"),r.a.createElement("button",{type:"submit",className:"inline-flex items-center px-4 py-2 mx-auto my-4 text-white bg-blue-900 rounded hover:bg-blue-800"},"Se Connecter")),r.a.createElement("span",{className:"mx-auto"},"Vous n'avez pas de compte ?"," ",r.a.createElement(m.b,{to:"/my-memo/signup",className:"text-blue-700 hover:underline"},"Cr\xe9ez un compte")),c&&r.a.createElement("span",{className:"mx-auto text-red-500"},c))},O=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.b,{exact:!0,path:"/my-memo/",component:d.a}),r.a.createElement(f.b,{path:"/my-memo/notes",component:d.a}),r.a.createElement(f.b,{path:"/my-memo/signup",component:N}),r.a.createElement(f.b,{path:"/my-memo/login",component:j}),r.a.createElement(f.b,{path:"*"},r.a.createElement(f.a,{to:"/my-memo/"})))};t.default=function(){return r.a.createElement(m.a,null,r.a.createElement(p,null),r.a.createElement("main",{role:"main",className:"flex flex-grow overflow-y-auto bg-white"},r.a.createElement(O,null)))}}}]);
//# sourceMappingURL=6.146e54b3.chunk.js.map